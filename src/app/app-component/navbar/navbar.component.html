<header class="site-header">
  <nav class="navbar navbar-inverse navbar-expand-sm navbar-dark fixed-top">
    <!-- <div class="container"> -->
    <a class="navbar-brand ml-1" routerLink="/">
      <img
        style="line-height: 30px;"
        src="../assets/media/logos/logo.png"
        alt=""
      />
    </a>

    <a
      class="navbar-brand mt-2"
      style="color: white; font-weight: 700;"
      routerLink="/"
      >piBee</a
    >

    <button
      class="navbar-toggler"
      type="button"
      data-toggle="collapse"
      data-target="#navbarToggle"
      aria-controls="navbarToggle"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="navbar-collapse collapse" id="navbarToggle">
      <!-- Navigation Link for Search Bar -->
      <app-search></app-search>

      <ul class="navbar-nav nav-pills ml-auto">
        <!-- If the user is Authenticated -->
        <ng-template [ngIf]="isLoggedIn()" [ngIfElse]="loggedOut">
          <!-- Navigation link for Chat -->
          <li
            class="nav-item"
            data-toggle="collapse"
            data-target=".navbar-collapse.show"
          >
            <p class="nav-link" routerLink="chatapp/">
              <i class="fa fa-comments-o" aria-hidden="true"></i>
            </p>
          </li>

          <!-- Dropdown for Messages -->
          <li
            class="nav-item dropdown"
            data-toggle="collapse"
            data-target=".navbar-collapse.show"
          >
            <a
              class="nav-link"
              id="messageToggle"
              data-toggle="dropdown"
              aria-haspopup="true"
              aria-expanded="false"
            >
              <i class="fa fa-envelope" aria-hidden="true"></i>
            </a>
            <div
              class="dropdown-menu dropdown-menu-right"
              aria-labelledby="messageToggle"
            >
              <span class="dropdown-header text-light bg-dark">Messages</span>
              <a class="dropdown-item" routerLink="/">Message 1</a>
              <a class="dropdown-item" routerLink="/">Message 1</a>
            </div>
          </li>

          <!-- Dropdown for Notification -->
          <li
            class="nav-item dropdown"
            data-toggle="collapse"
            data-target=".navbar-collapse.show"
          >
            <a
              class="nav-link"
              id="notificationToggle"
              data-toggle="dropdown"
              aria-haspopup="true"
              aria-expanded="false"
            >
              <i class="fa fa-bell"></i>
            </a>
            <div
              class="dropdown-menu dropdown-menu-right"
              aria-labelledby="notificationToggle"
            >
              <span class="dropdown-item text-light bg-dark"
                >Notifications</span
              >
              <a class="dropdown-item" routerLink="/">Notification 1</a>
              <a class="dropdown-item" routerLink="/">Notification 1</a>
            </div>
          </li>

          <!-- Dropdown for Settings -->
          <li
            class="nav-item dropdown"
            data-toggle="collapse"
            data-target=".navbar-collapse.show"
          >
            <!-- Settings symbol for settings dropdown -->
            <a
              class="nav-link"
              id="settingsToggle"
              data-toggle="dropdown"
              aria-haspopup="true"
              aria-expanded="false"
            >
              <i class="fa fa-cog"></i>
            </a>

            <!-- Settings Dropdown -->
            <div
              class="dropdown-menu dropdown-menu-right"
              aria-labelledby="settingsToggle"
            >
              <span class="dropdown-item text-light bg-dark">Settings</span>

              <!-- Link for Editing User Details -->
              <a class="dropdown-item" routerLink="edit-details/">
                <i class="fa fa-edit mr-2"></i>Edit Details
              </a>

              <!-- Link for Changing User Password -->
              <a class="dropdown-item" routerLink="change-password/">
                <i class="fa fa-edit mr-2"></i>Chnage Password
              </a>

              <button
                class="dropdown-item"
                (click)="deactivateUser()"
                routerLink="/"
              >
                <i class="fa fa-times mr-2"></i>Deactivate Account
              </button>
            </div>
          </li>

          <!-- Dropdown for User Profile -->
          <li
            class="nav-item dropdown"
            data-toggle="collapse"
            data-target=".navbar-collapse.show"
          >
            <a
              class="nav-link"
              id="userProfileToggle"
              data-toggle="dropdown"
              aria-haspopup="true"
              aria-expanded="false"
            >
              <i class="fa fa-user-circle-o"></i>
            </a>
            <div
              class="dropdown-menu dropdown-menu-right"
              aria-labelledby="userProfileToggle"
            >
              <a class="dropdown-item" routerLink="view-profile">
                <div class="row text-center">
                  <div class="col-md-1">
                    <i class="fa fa-user mt-3"></i>
                  </div>

                  <div class="col-md-5" style="margin-left: -6px;">
                    Signed in as
                    <br />
                    <span class="font-weight-bold">{{
                      loggedInUser.username
                    }}</span>
                  </div>
                </div>
              </a>

              <div class="dropdown-divider"></div>

              <a class="dropdown-item" routerLink="edit-profile/">
                <span class="fa fa-edit mr-2"></span>Edit Profile
              </a>

              <a class="dropdown-item" routerLink="logout/">
                <i class="fa fa-sign-out mr-2" aria-hidden="true"></i>Logout
              </a>
            </div>
          </li>

          <li
            class="nav-item"
            data-toggle="collapse"
            data-target=".navbar-collapse.show"
          >
            <p class="nav-link">Hi</p>
          </li>

          <!-- Display Username -->
          <li
            class="nav-item"
            data-toggle="collapse"
            data-target=".navbar-collapse.show"
          >
            <p [routerLink]="['/view-profile']" class="nav-link">
              {{ loggedInUser.username }}
            </p>
          </li>
        </ng-template>

        <!-- If the user is not Authenticated or Logged Out -->
        <ng-template #loggedOut>
          <!-- Navigation Link to Login -->
          <li
            class="nav-item dropdown"
            data-toggle="collapse"
            data-target=".navbar-collapse.show"
          >
            <p class="nav-link" routerLink="login/">
              <i class="fa fa-sign-in mr-2" aria-hidden="true"></i>Login
            </p>
          </li>

          <!-- Navigation Link to Register -->
          <li
            class="nav-item dropdown"
            data-toggle="collapse"
            data-target=".navbar-collapse.show"
          >
            <p class="nav-link" routerLink="register/">
              Register
            </p>
          </li>
        </ng-template>
      </ul>
    </div>
    <!-- </div> -->
  </nav>
</header>
