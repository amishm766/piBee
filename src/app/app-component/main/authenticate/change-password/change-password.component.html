<form [formGroup]="changePasswordForm">
  <h3 class="font-weight-bold mt-5">Change Password</h3>
  <div class="form-group">
    <label class="control-label">Username :</label>
    <input
      type="text"
      class="form-control"
      name="username"
      [value]="loggedInUser.username"
      readonly
    />
  </div>
  <div class="form-group">
    <label class="control-label required">Old Password</label>
    <input
      type="password"
      class="form-control"
      formControlName="oldPassword"
      [ngClass]="{
        'is-invalid': isInValid(changePasswordForm, 'oldPassword'),
        'is-valid': isValid(changePasswordForm, 'oldPassword')
      }"
    />
  </div>

  <div class="form-group">
    <label class="control-label required">New Password</label>
    <div class="row" style="margin: 0px;">
      <input
        type="password"
        class="form-control"
        formControlName="password"
        [ngClass]="{
          'is-invalid': isInValid(changePasswordForm, 'password'),
          'is-valid': isValid(changePasswordForm, 'password')
        }"
      />

      <div
        *ngIf="value('password').dirty || value('password').touched"
        class="alert alert-danger alert-icon"
      >
        <small
          *ngIf="value('password').errors?.required"
          style="margin-left: 20px;"
          >{{ "Password is Mandatory." }}</small
        >

        <small
          *ngIf="value('password').errors?.pattern"
          style="margin-left: 20px;"
          >{{ "Enter password in valid format." }}</small
        >
      </div>
    </div>

    <small
      *ngIf="value('password').errors?.required || value('password').dirty"
      style="color: grey;"
    >
      <div *ngIf="!value('password').dirty">
        {{ "*Need 8 more characters including a number,an Uppercase letter." }}
      </div>
      <div *ngIf="value('password').dirty && value('password').errors">
        *Need
        <span *ngIf="value('password').errors?.minlength">
          {{
            value("password").errors?.minlength.requiredLength -
              value("password").errors?.minlength.actualLength
          }}
        </span>
        {{ "more characters including" }}
        <span *ngIf="value('password').errors?.hasNumber">a number</span>
        <span *ngIf="value('password').errors?.hasCapitalCase"
          >,an Uppercase</span
        >
        <span *ngIf="value('password').errors?.hasSmallCase"
          >{{ "and lowercase" }}
        </span>
        <span
          *ngIf="
            value('password').errors?.hasSmallCase ||
            value('password').errors?.hasCapitalCase
          "
          >{{ " letter." }}</span
        >
      </div>
    </small>
  </div>

  <button
    (click)="confirmUser()"
    type="submit"
    class="btn"
    [disabled]="changePasswordForm.invalid"
  >
    Change
  </button>
</form>
